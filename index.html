<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>googleBooksAPI</title>
  <link rel="stylesheet" href="style.css">
  
</head>

<body>

<header>
  <div class="header-container">
    <div class="logo">わたしの本棚</div>
    <div class="search-bar">
      <input type="text" name="" id="chat-input" placeholder="登録する本のキーワードを入力">
      <button id="btn">検索</button>
    </div>
    <div>
      <div class="nav-icons">
        <span>アカウント</span>
        <span>カレンダー</span>
      </div>
    </div>
  </div>
</header>

<div id="output"></div>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <!-- axiosライブラリの読み込み -->
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

  <script>
    // リクエストを送るurlを準備
    // const url = 'https://www.googleapis.com/books/v1/volumes?q=intitle:javascript';
    // const url = 'https://www.googleapis.com/books/v1/volumes?q=inauthor:村上春樹';

    document.getElementById('btn').addEventListener('click', function() {
      const keyword = document.getElementById('chat-input').value;
      const url = `https://www.googleapis.com/books/v1/volumes?q=${keyword}&maxResults=5`;


    axios
      .get(url)
      .then(function (response) {
      // リクエスト成功時の処理（responseに結果が入っている）
      console.log(response.data.items[0].volumeInfo.title);
      const books = []; //検索結果を格納
      response.data.items.forEach(function(book) {
        const bookInfo = book.volumeInfo;
        books.push(`
            <div class="book">
              <img src="${bookInfo.imageLinks ? bookInfo.imageLinks. thumbnail:''}" alt="${bookInfo.title}">
              <p>${bookInfo.title}</p>
            </div>   
            `);
      });
      document.getElementById('output').innerHTML = books.join('');
  })

  .catch(function (error) {
    // リクエスト失敗時の処理（errorにエラー内容が入っている）
    console.log(error);
  })
  .finally(function () {
    // 成功失敗に関わらず必ず実行
    console.log("done!");
  });


    });



  </script>
</body>

</html>